<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心瞳管理后台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1a202c;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* 左侧导航 */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            color: #2d3748;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: fixed;
            height: 100vh;
            z-index: 1000;
            overflow-y: auto;
            overflow-x: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .sidebar.collapsed {
            width: 70px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .sidebar.collapsed .nav-item {
            justify-content: center;
            padding: 12px 10px;
            margin: 4px 8px;
        }

        .sidebar.collapsed .nav-item:hover {
            transform: translateX(0) scale(1.05);
        }

        .sidebar-header {
            padding: 24px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            background: rgba(255, 255, 255, 0.8);
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .logo-subtitle {
            font-size: 13px;
            color: #718096;
            font-weight: 500;
        }

        .sidebar.collapsed .logo-subtitle {
            display: none;
        }

        .nav-section {
            margin: 16px 0;
        }

        .nav-section-title {
            padding: 12px 20px 8px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: #a0aec0;
            letter-spacing: 0.5px;
        }

        .sidebar.collapsed .nav-section-title {
            display: none;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            margin: 4px 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            font-weight: 500;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item:hover {
            background: rgba(102, 126, 234, 0.12);
            color: #667eea;
            transform: translateX(6px) scale(1.02);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
        }

        .nav-item:active {
            transform: translateX(4px) scale(0.98);
            transition: all 0.1s ease;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            transform: translateX(2px);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 60%;
            background: #ffffff;
            border-radius: 0 2px 2px 0;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                height: 0;
                opacity: 0;
            }
            to {
                height: 60%;
                opacity: 1;
            }
        }

        .nav-item i {
            width: 20px;
            margin-right: 12px;
            text-align: center;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-item:hover i {
            transform: rotate(5deg) scale(1.1);
        }

        .nav-item.active i {
            transform: scale(1.05);
        }

        .sidebar.collapsed .nav-item i {
            margin-right: 0;
            font-size: 18px;
        }

        /* 工具提示样式 */
        .nav-item[data-tooltip] {
            position: relative;
        }

        .sidebar.collapsed .nav-item[data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1001;
            margin-left: 10px;
            opacity: 0;
            animation: tooltipFadeIn 0.3s ease forwards;
        }

        .sidebar.collapsed .nav-item[data-tooltip]:hover::before {
            content: '';
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            border: 5px solid transparent;
            border-right-color: rgba(0, 0, 0, 0.8);
            margin-left: 5px;
            z-index: 1001;
            opacity: 0;
            animation: tooltipFadeIn 0.3s ease forwards;
        }

        @keyframes tooltipFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50%) translateX(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* 加载动画 */
        .nav-item.loading {
            animation: pulse 1s infinite;
        }

        /* 快捷操作样式 */
        .nav-item.quick-action {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            margin: 4px 12px;
            position: relative;
            overflow: hidden;
        }

        .nav-item.quick-action::before {
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.15), transparent);
        }

        .nav-item.quick-action:hover {
            background: rgba(102, 126, 234, 0.18);
            border-color: rgba(102, 126, 234, 0.5);
            transform: translateX(5px) scale(1.03);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .nav-item.quick-action:active {
            transform: translateX(3px) scale(0.97);
        }

        .nav-item.quick-action i {
            color: #667eea;
            transition: all 0.3s ease;
        }

        .nav-item.quick-action:hover i {
            color: #5a67d8;
            transform: scale(1.1);
        }

        /* 导航内容区域 */
        .nav-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        /* 导航栏底部信息 */
        .nav-footer {
            margin: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            flex-shrink: 0;
        }

        .nav-footer .system-info {
            font-size: 12px;
            color: #8a9ba8;
            margin-bottom: 8px;
        }

        .nav-footer .version {
            font-size: 11px;
            color: #667eea;
            font-weight: 500;
        }

        .sidebar.collapsed .nav-item span {
            display: none;
        }

        .sidebar.collapsed .nav-content {
            padding-bottom: 10px;
        }

        .sidebar.collapsed .nav-footer {
            margin: 10px;
            padding: 10px;
        }

        .sidebar.collapsed .nav-footer .system-info,
        .sidebar.collapsed .nav-footer .version {
            display: none;
        }

        .toggle-btn {
            position: absolute;
            top: 24px;
            right: -15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.2s ease;
        }

        .toggle-btn:hover {
            transform: scale(1.1);
        }

        /* 主内容区 */
        .main-content {
            flex: 1;
            margin-left: 280px;
            transition: all 0.3s ease;
            background: transparent;
        }

        .main-content.expanded {
            margin-left: 70px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            padding: 20px 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .breadcrumb {
            color: #718096;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .breadcrumb i {
            color: #a0aec0;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .user-menu span {
            font-weight: 600;
            color: #2d3748;
        }

        .content {
            padding: 32px;
        }

        /* 卡片样式 */
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            padding: 28px 24px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .metric-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .metric-card h3 {
            font-size: 13px;
            color: #718096;
            margin-bottom: 16px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #1a202c;
            line-height: 1.2;
        }

        .metric-value.danger {
            color: #e53e3e;
        }

        /* 面板样式 */
        .panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .panel-header {
            background: rgba(102, 126, 234, 0.05);
            padding: 24px;
            border-bottom: 1px solid rgba(102, 126, 234, 0.1);
            font-weight: 600;
            color: #1a202c;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-header i {
            color: #667eea;
        }

        .panel-content {
            padding: 24px;
        }

        .alert-table {
            width: 100%;
            border-collapse: collapse;
        }

        .alert-table th,
        .alert-table td {
            padding: 16px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        .alert-table th {
            background: rgba(102, 126, 234, 0.05);
            font-weight: 600;
            color: #4a5568;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .alert-table td {
            color: #2d3748;
            font-weight: 500;
        }

        .log-item {
            padding: 14px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            font-size: 14px;
            color: #4a5568;
            line-height: 1.5;
        }

        .log-item:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #667eea;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 8px;
            transition: width 0.3s ease;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
        }

        .status-item {
            text-align: center;
            padding: 16px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.2s ease;
        }

        .status-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
        }

        .status-label {
            font-size: 13px;
            color: #718096;
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-value {
            font-size: 24px;
            font-weight: 700;
            color: #1a202c;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }
            
            .sidebar {
                width: 85%;
                max-width: 280px;
                transform: translateX(-90%);
                box-shadow: 0 0 50px rgba(0, 0, 0, 0.3);
                height: 100%;
                top: 0;
                left: 0;
                z-index: 1010;
                transition: transform 0.3s ease;
            }

            .sidebar.show {
                transform: translateX(0);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            }
            
            /* 添加侧边栏指示器 */
            .sidebar::after {
                content: '';
                position: absolute;
                top: 50%;
                right: -15px;
                width: 30px;
                height: 60px;
                background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(255,255,255,0.5));
                border-radius: 0 30px 30px 0;
                transform: translateY(-50%);
                box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
                z-index: 1;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .main-content {
                margin-left: 0;
                width: 100%;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            .toggle-btn {
                position: fixed;
                top: 16px;
                left: 16px;
                right: auto;
                z-index: 1002;
                width: 40px;
                height: 40px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
                border: 2px solid rgba(255, 255, 255, 0.8);
            }

            .header {
                padding: 16px 16px 16px 60px;
                flex-wrap: wrap;
                position: sticky;
                top: 0;
                background-color: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(20px);
                z-index: 100;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }

            .breadcrumb {
                font-size: 12px;
                width: 100%;
                margin-bottom: 8px;
            }

            .user-menu {
                margin-left: auto;
            }

            .content {
                padding: 20px 12px;
            }

            .metric-cards {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .panels {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .panel {
                margin-bottom: 16px;
                overflow-x: auto;
            }

            .status-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 12px;
            }
            
            /* 优化表格在移动端的显示 */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 0 -15px;
                padding: 0 15px;
            }
        }

        @media (max-width: 480px) {
            .metric-card {
                padding: 20px 16px;
            }

            .panel-header {
                padding: 16px;
                font-size: 14px;
            }

            .panel-content {
                padding: 16px;
                overflow-x: auto;
            }

            .alert-table {
                font-size: 11px;
                display: block;
                width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .alert-table th,
            .alert-table td {
                padding: 10px 6px;
                white-space: nowrap;
            }

            .user-menu {
                padding: 4px 8px;
                font-size: 12px;
            }

            .user-menu span {
                max-width: 100px;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .user-avatar {
                width: 28px;
                height: 28px;
                min-width: 28px;
            }

            .status-grid {
                grid-template-columns: 1fr;
            }

            .metric-value {
                font-size: 24px;
            }

            .log-item {
                font-size: 12px;
                padding: 12px 0;
            }
            
            /* 增强触摸区域 */
            .nav-item, .user-menu {
                min-height: 44px; /* 苹果推荐的最小触摸区域高度 */
            }
            
            /* 优化用户菜单在小屏幕上的显示 */
            .user-menu {
                padding: 6px 10px;
            }
            
            .user-menu .avatar {
                width: 30px;
                height: 30px;
            }
            
            /* 优化表格在超小屏幕上的显示 */
            table {
                min-width: 100%;
                white-space: nowrap;
            }
            
            /* 优化侧边栏在小屏幕上的显示 */
            .sidebar.show {
                width: 85%;
                max-width: 280px;
            }
            
            /* 优化面板内容在小屏幕上的显示 */
            .panel-content {
                padding: 10px 0;
            }
        }
        
        /* 移动设备特定优化 */
        .mobile-device .sidebar {
            width: 85%; /* 在移动设备上侧边栏宽度占屏幕85% */
            max-width: 280px;
        }
        
        /* 添加表格水平滚动指示器 */
        .table-container {
            position: relative;
        }
        
        .table-container::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 20px;
            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.7));
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .table-container.has-overflow::after {
            opacity: 1;
        }
        
        /* 添加下拉刷新动画样式 */
        .pull-to-refresh {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -60px;
            color: #666;
            font-size: 14px;
            transition: margin-top 0.3s;
            position: relative;
            z-index: 5;
            background-color: rgba(245, 247, 250, 0.8);
            backdrop-filter: blur(5px);
            border-radius: 0 0 8px 8px;
        }
        
        .pull-to-refresh.active {
            margin-top: 0;
        }
        
        .pull-to-refresh.ready span {
            color: #4a6cf7;
        }
        
        /* 日志容器样式优化 */
        .log-container {
            max-height: 350px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0 5px;
        }
        
        .mobile-device .log-container {
            max-height: 280px;
        }
        
        .log-item {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            line-height: 1.5;
            word-break: break-word;
        }
        
        .mobile-device .log-item {
            padding: 12px 0;
            font-size: 13px;
        }
        
        /* 移动端滚动条美化 */
        .mobile-device ::-webkit-scrollbar {
            width: 4px;
            height: 4px;
        }
        
        .mobile-device ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        .mobile-device ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }
        
        /* 切换按钮闪烁动画 */
        @keyframes attention {
            0% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); }
            50% { transform: scale(1.2); box-shadow: 0 4px 20px rgba(102, 126, 234, 0.6); }
            100% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); }
        }
        
        .toggle-btn.attention {
            animation: attention 0.8s ease-in-out 3;
        }

        /* 增加额外的小屏幕适配 */
        @media (max-width: 360px) {
            .header {
                padding: 12px 12px 12px 50px;
            }

            .toggle-btn {
                top: 12px;
                left: 12px;
                width: 30px;
                height: 30px;
            }

            .user-menu span {
                max-width: 80px;
            }

            .content {
                padding: 16px 8px;
            }

            .metric-card {
                padding: 16px 12px;
            }

            .metric-value {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 左侧导航 -->
        <nav class="sidebar" id="sidebar">
            <button class="toggle-btn" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="sidebar-header">
                <div class="logo">心瞳</div>
                <div class="logo-subtitle">管理后台</div>
            </div>

            <div class="nav-content">
                <div class="nav-section">
                    <div class="nav-section-title">运营与干预中心</div>
                    <div class="nav-item active" onclick="navigateToPage('index.html', this)" data-tooltip="主看板">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>主看板</span>
                    </div>
                    <div class="nav-item" onclick="navigateToPage('risk-alert-center.html', this)" data-tooltip="风险预警中心">
                        <i class="fas fa-bell"></i>
                        <span>风险预警中心</span>
                    </div>
                    <div class="nav-item" onclick="navigateToPage('child-profile.html', this)" data-tooltip="儿童个体档案">
                        <i class="fas fa-user"></i>
                        <span>儿童个体档案</span>
                    </div>
                    <div class="nav-item" onclick="navigateToPage('report-center.html', this)" data-tooltip="报告中心">
                        <i class="fas fa-file-alt"></i>
                        <span>报告中心</span>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">系统管理与技术后台</div>
                    <div class="nav-item" onclick="navigateToPage('device-management.html', this)" data-tooltip="设备管理">
                        <i class="fas fa-server"></i>
                        <span>设备管理</span>
                    </div>
                    <div class="nav-item" onclick="navigateToPage('user-management.html', this)" data-tooltip="用户与权限管理">
                        <i class="fas fa-users-cog"></i>
                        <span>用户与权限管理</span>
                    </div>
                    <div class="nav-item" onclick="showComingSoon(this)" data-tooltip="数据与模型管理">
                        <i class="fas fa-cogs"></i>
                        <span>数据与模型管理</span>
                    </div>
                    <div class="nav-item" onclick="showComingSoon(this)" data-tooltip="操作审计日志">
                        <i class="fas fa-shield-alt"></i>
                        <span>操作审计日志</span>
                    </div>
                </div>

                <!-- 快捷操作区 -->
                <div class="nav-section">
                    <div class="nav-section-title">快捷操作</div>
                    <div class="nav-item quick-action" onclick="showQuickAlert()" data-tooltip="新建预警">
                        <i class="fas fa-plus-circle"></i>
                        <span>新建预警</span>
                    </div>
                    <div class="nav-item quick-action" onclick="showQuickReport()" data-tooltip="导出报告">
                        <i class="fas fa-download"></i>
                        <span>导出报告</span>
                    </div>
                </div>
            </div>

            <!-- 系统信息区 -->
            <div class="nav-footer">
                <div class="system-info">心理健康监测系统</div>
                <div class="version">v2.1.0</div>
            </div>
        </nav>

        <!-- 主内容区 -->
        <main class="main-content" id="mainContent">
            <header class="header">
                <div class="breadcrumb">
                    <i class="fas fa-home"></i> 心瞳留守儿童关爱平台 / 运营监控中心
                </div>
                <div class="user-menu">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span>吴桐更兼细语</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </header>

            <div class="content">
                <!-- 核心指标卡片 -->
                <div class="metric-cards">
                    <div class="metric-card">
                        <h3>试点留守儿童</h3>
                        <div class="metric-value">86 名</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 8px;">已建档案并持续关注</div>
                    </div>
                    <div class="metric-card">
                        <h3>试点地区</h3>
                        <div class="metric-value" style="font-size: 16px;">湖南省永州市道县</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 8px;">MVP试验阶段</div>
                    </div>
                    <div class="metric-card">
                        <h3>在线设备数</h3>
                        <div class="metric-value">78 / 86 台</div>
                        <div style="font-size: 12px; color: #2ecc71; margin-top: 8px;">在线率 90.7%</div>
                    </div>
                    <div class="metric-card">
                        <h3>本月成功干预案例</h3>
                        <div class="metric-value" style="color: #2ecc71;">23 例</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 8px;">干预成功率 85.2%</div>
                    </div>
                </div>

                <!-- 待办事项与日志 -->
                <div class="panels">
                    <div class="panel">
                        <div class="panel-header">
                            <i class="fas fa-exclamation-triangle"></i> 我的待处理预警
                        </div>
                        <div class="panel-content">
                            <div class="pull-to-refresh">
                                <span>下拉刷新</span>
                            </div>
                            <div class="table-container">
                                <table class="alert-table">
                                    <thead>
                                        <tr>
                                            <th>儿童ID</th>
                                            <th>预警等级</th>
                                            <th>预警类型</th>
                                            <th>触发时间</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>DC2024012</td>
                                            <td><span class="alert-level high">高危</span></td>
                                            <td>情绪异常</td>
                                            <td>2024-01-15 14:25</td>
                                        </tr>
                                        <tr>
                                            <td>DC2024035</td>
                                            <td><span class="alert-level medium">中危</span></td>
                                            <td>行为异常</td>
                                            <td>2024-01-15 11:30</td>
                                        </tr>
                                        <tr>
                                            <td>DC2024058</td>
                                            <td><span class="alert-level low">低危</span></td>
                                            <td>学习困难</td>
                                            <td>2024-01-15 09:45</td>
                                        </tr>
                                        <tr>
                                            <td>DC2024023</td>
                                            <td><span class="alert-level medium">中危</span></td>
                                            <td>睡眠异常</td>
                                            <td>2024-01-14 16:20</td>
                                        </tr>
                                        <tr>
                                            <td>DC2024071</td>
                                            <td><span class="alert-level low">低危</span></td>
                                            <td>注意力不集中</td>
                                            <td>2024-01-14 13:15</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <i class="fas fa-history"></i> 系统活动日志
                        </div>
                        <div class="panel-content">
                    <div class="pull-to-refresh">
                         <span>下拉刷新</span>
                     </div>
                     <div class="log-container">
                         <div class="log-item">
                             <span class="log-time">[15:30:10]</span> 道县心理师王老师成功干预DC-2024-0156案例，儿童情绪状态明显改善。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[14:45:22]</span> 道县试点区域新增8台智能设备，覆盖2个村庄的留守儿童家庭。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[13:10:55]</span> 道县DC-2024-0198案例：通过AI分析发现儿童学习兴趣提升，家长反馈积极。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[12:25:33]</span> 本月试点累计生成视频摘要156条，为家长节省观看时间约52小时。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[11:18:47]</span> 道县教育局反馈：通过平台发现并成功干预5例潜在心理健康问题。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[10:32:15]</span> 心瞳AI模型V2.1在道县试点中完成优化，情绪识别准确率达到89.3%。
                         </div>
                         <div class="log-item">
                             <span class="log-time">[09:15:33]</span> 道县DC-2024-0089：家长通过视频摘要及时发现孩子睡眠问题。
                         </div>
                     </div>
                </div>
                    </div>
                </div>

                <!-- 设备与模型状态 -->
                <div class="panels">
                    <div class="panel">
                        <div class="panel-header">
                            <i class="fas fa-heartbeat"></i> 设备健康监控
                        </div>
                        <div class="panel-content">
                            <div class="status-grid">
                                <div class="status-item">
                                    <div class="status-label">设备在线率</div>
                                    <div class="status-value" style="color: #2ecc71;">90.7%</div>
                                    <div style="font-size: 12px; color: #7f8c8d;">(78/86台)</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">今日视频处理</div>
                                    <div class="status-value" style="color: #3498db;">240 小时</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">生成摘要数</div>
                                    <div class="status-value" style="color: #9b59b6;">156 条</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">故障设备</div>
                                    <div class="status-value" style="color: #e67e22;">8 台</div>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 95.3%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <i class="fas fa-brain"></i> 心瞳AI智能分析引擎 V2.1
                        </div>
                        <div class="panel-content">
                            <div class="status-grid">
                                <div class="status-item">
                                    <div class="status-label">情绪识别准确率</div>
                                    <div class="status-value" style="color: #2ecc71;">89.3%</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">行为分析准确率</div>
                                    <div class="status-value" style="color: #2ecc71;">86.4%</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">视频摘要质量</div>
                                    <div class="status-value" style="color: #3498db;">82.1%</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">本月处理视频</div>
                                    <div class="status-value" style="color: #9b59b6;">1,240 小时</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">成功预警案例</div>
                                    <div class="status-value" style="color: #e67e22;">23 例</div>
                                </div>
                                <div class="status-item">
                                    <div class="status-label">家长满意度</div>
                                    <div class="status-value" style="color: #2ecc71;">91.8%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 侧边栏切换函数
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleBtn = document.querySelector('.toggle-btn');
            
            if (window.innerWidth <= 768) {
                // 移动端：显示/隐藏侧边栏
                sidebar.classList.toggle('show');
                
                // 更新菜单按钮图标
                if (sidebar.classList.contains('show')) {
                    toggleBtn.innerHTML = '<i class="fas fa-times"></i>';
                } else {
                    toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';
                }
            } else {
                // 桌面端：折叠/展开侧边栏
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
            }
        }
        
        // 导航页面跳转
        function navigateToPage(url, element) {
            // 添加点击动画效果
            element.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                // 移除所有活动状态
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // 添加活动状态到当前项
                element.classList.add('active');
                
                // 恢复变换
                element.style.transform = '';
                
                // 页面跳转
                if (url !== 'index.html') {
                    // 添加页面切换动画
                    document.body.style.opacity = '0.8';
                    setTimeout(() => {
                        window.location.href = url;
                    }, 200);
                }
            }, 100);
        }

        // 显示即将推出功能
        function showComingSoon(element) {
            // 添加震动效果
            element.style.animation = 'shake 0.5s ease-in-out';
            
            // 临时高亮效果
            element.style.background = 'linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.2))';
            element.style.borderLeft = '4px solid #ffc107';
            element.style.boxShadow = '0 4px 15px rgba(255, 193, 7, 0.3)';
            
            // 创建自定义提示框
            const toast = document.createElement('div');
            toast.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #ffc107, #ff9800);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
                    z-index: 10000;
                    font-weight: 500;
                    animation: slideInRight 0.3s ease;
                ">
                    <i class="fas fa-clock" style="margin-right: 8px;"></i>
                    该功能即将推出，敬请期待！
                </div>
            `;
            document.body.appendChild(toast);
            
            // 恢复原样
            setTimeout(() => {
                element.style.background = '';
                element.style.borderLeft = '';
                element.style.boxShadow = '';
                element.style.animation = '';
                document.body.removeChild(toast);
            }, 3000);
        }

        // 快捷新建预警
        function showQuickAlert() {
            const alertData = {
                timestamp: new Date().toLocaleString(),
                type: '手动创建',
                priority: '中等'
            };
            
            if (confirm('确定要创建新的风险预警吗？')) {
                alert('预警创建成功！\n时间：' + alertData.timestamp + '\n类型：' + alertData.type);
                // 这里可以添加实际的预警创建逻辑
            }
        }

        // 快捷导出报告
        function showQuickReport() {
            const reportTypes = ['日报', '周报', '月报', '自定义报告'];
            const selectedType = prompt('请选择报告类型：\n1. 日报\n2. 周报\n3. 月报\n4. 自定义报告\n\n请输入数字(1-4):');
            
            if (selectedType && selectedType >= 1 && selectedType <= 4) {
                const type = reportTypes[selectedType - 1];
                alert('正在生成' + type + '...\n预计完成时间：2-3分钟');
                // 这里可以添加实际的报告生成逻辑
            }
        }
        
        // 页面加载时初始化侧边栏状态
         document.addEventListener('DOMContentLoaded', function() {
             const sidebar = document.getElementById('sidebar');
             const toggleBtn = document.querySelector('.toggle-btn');
             
             // 检测是否为移动设备
             if (window.innerWidth <= 768) {
                 // 在移动设备上，确保侧边栏初始状态正确
                 if (!sidebar.classList.contains('show')) {
                     toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';
                 }
                 
                 // 添加提示动画，引导用户注意侧边栏
                 setTimeout(function() {
                     sidebar.style.transform = 'translateX(-80%)';
                     setTimeout(function() {
                         sidebar.style.transform = 'translateX(-90%)';
                     }, 800);
                 }, 1000);
                 
                 // 添加闪烁动画到切换按钮，引导用户注意
                 toggleBtn.classList.add('attention');
                 setTimeout(function() {
                     toggleBtn.classList.remove('attention');
                 }, 3000);
             }
             
             // 设置当前页面的导航高亮
             const currentPage = window.location.pathname.split('/').pop() || 'index.html';
             const navItems = document.querySelectorAll('.nav-item');
             
             navItems.forEach(item => {
                 const onclick = item.getAttribute('onclick');
                 if (onclick && onclick.includes(currentPage)) {
                     item.classList.add('active');
                 }
             });
         });

        // 设置活动导航项
        function setActiveNav(element) {
            // 移除所有活动状态
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // 设置当前项为活动状态
            element.classList.add('active');
            
            // 在移动端点击菜单项后自动隐藏侧边栏
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('show');
                document.querySelector('.toggle-btn').innerHTML = '<i class="fas fa-bars"></i>';
            }
        }

        // 添加触摸滑动手势支持
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, false);
        
        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, false);
        
        function handleSwipe() {
            const sidebar = document.getElementById('sidebar');
            const swipeThreshold = 70; // 滑动阈值
            
            if (window.innerWidth <= 768) {
                // 从左向右滑动，显示侧边栏
                if (touchEndX - touchStartX > swipeThreshold && touchStartX < 50) {
                    sidebar.classList.add('show');
                    document.querySelector('.toggle-btn').innerHTML = '<i class="fas fa-times"></i>';
                }
                
                // 从右向左滑动，隐藏侧边栏
                if (touchStartX - touchEndX > swipeThreshold && sidebar.classList.contains('show')) {
                    sidebar.classList.remove('show');
                    document.querySelector('.toggle-btn').innerHTML = '<i class="fas fa-bars"></i>';
                }
            }
        }

        // 点击主内容区域时隐藏移动端侧边栏
        document.getElementById('mainContent').addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                if (sidebar.classList.contains('show')) {
                    sidebar.classList.remove('show');
                    document.querySelector('.toggle-btn').innerHTML = '<i class="fas fa-bars"></i>';
                }
            }
        });

        // 窗口大小改变时重置侧边栏状态
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleBtn = document.querySelector('.toggle-btn');
            
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show');
                toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';
                
                if (sidebar.classList.contains('collapsed')) {
                    mainContent.classList.add('expanded');
                } else {
                    mainContent.classList.remove('expanded');
                }
            } else {
                sidebar.classList.remove('collapsed');
                mainContent.classList.remove('expanded');
            }
        });

        // 双击关闭侧边栏（移动端）
        document.getElementById('sidebar').addEventListener('dblclick', function(e) {
            if (window.innerWidth <= 768) {
                this.classList.remove('show');
                document.querySelector('.toggle-btn').innerHTML = '<i class="fas fa-bars"></i>';
            }
        });

        // 检测表格是否需要水平滚动
        function checkTableOverflow() {
            const tableContainers = document.querySelectorAll('.table-container');
            tableContainers.forEach(container => {
                const table = container.querySelector('table');
                if (table && table.offsetWidth > container.offsetWidth) {
                    container.classList.add('has-overflow');
                } else {
                    container.classList.remove('has-overflow');
                }
            });
        }
        
        // 实现下拉刷新功能
        function setupPullToRefresh() {
            if (window.innerWidth > 768) return; // 仅在移动端启用
            
            const panels = document.querySelectorAll('.panel');
            let startY, currentY;
            const threshold = 60; // 触发刷新的阈值
            
            panels.forEach(panel => {
                const refreshEl = panel.querySelector('.pull-to-refresh');
                if (!refreshEl) return;
                
                panel.addEventListener('touchstart', function(e) {
                    if (panel.scrollTop === 0) { // 只有在顶部才能下拉刷新
                        startY = e.touches[0].clientY;
                    }
                }, { passive: true });
                
                panel.addEventListener('touchmove', function(e) {
                    if (!startY) return;
                    
                    currentY = e.touches[0].clientY;
                    const diff = currentY - startY;
                    
                    if (diff > 0 && panel.scrollTop === 0) {
                        refreshEl.style.marginTop = Math.min(diff / 2, threshold) - threshold + 'px';
                        if (diff > threshold) {
                            refreshEl.classList.add('ready');
                            refreshEl.querySelector('span').textContent = '释放刷新';
                        } else {
                            refreshEl.classList.remove('ready');
                            refreshEl.querySelector('span').textContent = '下拉刷新';
                        }
                        e.preventDefault();
                    }
                });
                
                panel.addEventListener('touchend', function() {
                    if (!startY) return;
                    
                    if (currentY - startY > threshold) {
                        // 触发刷新
                        refreshEl.style.marginTop = '0';
                        refreshEl.classList.add('active');
                        refreshEl.querySelector('span').textContent = '正在刷新...';
                        
                        // 模拟刷新过程
                        setTimeout(() => {
                            refreshEl.style.marginTop = -threshold + 'px';
                            refreshEl.classList.remove('active', 'ready');
                            refreshEl.querySelector('span').textContent = '下拉刷新';
                            // 这里可以添加实际的数据刷新逻辑
                        }, 1500);
                    } else {
                        // 取消刷新
                        refreshEl.style.marginTop = -threshold + 'px';
                    }
                    
                    startY = null;
                    currentY = null;
                });
            });
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 优化页面加载动画
            const elements = [
                ...document.querySelectorAll('.metric-card'),
                ...document.querySelectorAll('.panel')
            ];
            
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = 'all 0.4s ease';
                
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, 100 + index * 80);
            });
            
            // 检测设备类型并优化交互
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                // 移动设备优化
                document.body.classList.add('mobile-device');
            }
            
            // 检测表格是否需要水平滚动
            checkTableOverflow();
            window.addEventListener('resize', checkTableOverflow);
            
            // 设置下拉刷新
            setupPullToRefresh();
            
            // 优化移动端点击体验，消除300ms延迟
            if ('ontouchstart' in document.documentElement) {
                const clickableElements = document.querySelectorAll('button, .nav-item, .user-menu, .toggle-btn');
                clickableElements.forEach(el => {
                    el.addEventListener('touchstart', function() {}, {passive: true});
                });
            }
        });
    </script>
</body>
</html>